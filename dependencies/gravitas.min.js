!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):"object"==typeof exports?exports.Gravitas=i():t.Gravitas=i()}(this,function(){return function(t){function i(r){if(n[r])return n[r].exports;var e=n[r]={exports:{},id:r,loaded:!1};return t[r].call(e.exports,e,e.exports,i),e.loaded=!0,e.exports}var n={};return i.m=t,i.c=n,i.p="",i(0)}([function(t,i,n){"use strict";var r={Spring:n(2),Gravity:n(1),Friction:n(5),GravityWithBounce:n(6),Fall:n(4),createAnimation:n(3)};t.exports=r},function(t){"use strict";function i(t,i){this._acceleration=t,this._terminate=i,this._x=0,this._v=0,this._a=t,this._startTime=0}i.prototype.set=function(t,i){this._x=t,this._v=i,this._startTime=(new Date).getTime()},i.prototype.x=function(t){var i=(new Date).getTime();return void 0==t&&(t=(i-this._startTime)/1e3),this._x+this._v*t+.5*this._a*t*t},i.prototype.dx=function(){var t=(new Date).getTime(),i=(t-this._startTime)/1e3;return this._v+i*this._a},i.prototype.done=function(){return Math.abs(this.x())>this._terminate},i.prototype.reconfigure=function(t){this.set(this.x(),this.dx()),this._a=t},i.prototype.configuration=function(){var t=this;return[{label:"Acceleration",read:function(){return t._a},write:this.reconfigure.bind(this),min:-3e3,max:3e3}]},t.exports=i},function(t){"use strict";function i(t,i,n){return t>i-n&&i+n>t}function n(t,n){return i(t,0,n)}function r(t,i,n){this._m=t,this._k=i,this._c=n,this._solution=null,this._endPosition=0,this._startTime=0}var e=.001;r.prototype._solve=function(t,i){var n=this._c,r=this._m,e=this._k,o=n*n-4*r*e;if(0==o){var s=-n/(2*r),a=t,h=i/(s*t);return{x:function(t){return(a+h*t)*Math.pow(Math.E,s*t)},dx:function(t){var i=Math.pow(Math.E,s*t);return s*(a+h*t)*i+h*i}}}if(o>0){var u=(-n-Math.sqrt(o))/(2*r),_=(-n+Math.sqrt(o))/(2*r),h=(i-u*t)/(_-u),a=t-h;return{x:function(t){return a*Math.pow(Math.E,u*t)+h*Math.pow(Math.E,_*t)},dx:function(t){return a*u*Math.pow(Math.E,u*t)+h*_*Math.pow(Math.E,_*t)}}}var p=Math.sqrt(4*r*e-n*n)/(2*r),s=-(n/2*r),a=t,h=(i-s*t)/p;return{x:function(t){return Math.pow(Math.E,s*t)*(a*Math.cos(p*t)+h*Math.sin(p*t))},dx:function(t){var i=Math.pow(Math.E,s*t),n=Math.cos(p*t),r=Math.sin(p*t);return i*(h*p*n-a*p*r)+s*i*(h*r+a*n)}}},r.prototype.x=function(t){return void 0==t&&(t=((new Date).getTime()-this._startTime)/1e3),this._solution?this._endPosition+this._solution.x(t):0},r.prototype.dx=function(t){return void 0==t&&(t=((new Date).getTime()-this._startTime)/1e3),this._solution?this._solution.dx(t):0},r.prototype.setEnd=function(t,i,r){if(r||(r=(new Date).getTime()),t!=this._endPosition||!n(i,e)){i=i||0;var o=this._endPosition;this._solution&&(n(i,e)&&(i=this._solution.dx((r-this._startTime)/1e3)),o=this._solution.x((r-this._startTime)/1e3),n(i,e)&&(i=0),n(o,e)&&(o=0),o+=this._endPosition),this._solution&&n(o-t,e)&&n(i,e)||(this._endPosition=t,this._solution=this._solve(o-this._endPosition,i),this._startTime=r)}},r.prototype.snap=function(t){this._startTime=(new Date).getTime(),this._endPosition=t,this._solution={x:function(){return 0},dx:function(){return 0}}},r.prototype.done=function(t){return t||(t=(new Date).getTime()),i(this.x(),this._endPosition,e)&&n(this.dx(),e)},r.prototype.reconfigure=function(t,i,n){this._m=t,this._k=i,this._c=n,this.done()||(this._solution=this._solve(this.x()-this._endPosition,this.dx()),this._startTime=(new Date).getTime())},r.prototype.springConstant=function(){return this._k},r.prototype.damping=function(){return this._c},r.prototype.configuration=function(){function t(t,i){t.reconfigure(1,i,t.damping())}function i(t,i){t.reconfigure(1,t.springConstant(),i)}return[{label:"Spring Constant",read:this.springConstant.bind(this),write:t.bind(this,this),min:100,max:1e3},{label:"Damping",read:this.damping.bind(this),write:i.bind(this,this),min:1,max:500}]},t.exports=r},function(t){"use strict";function i(t,i){function n(i,r,e){i&&i.cancelled||(e(r),t.done()||i.cancelled||(i.id=requestAnimationFrame(n.bind(null,i,r,e))))}function r(t){t&&t.id&&cancelAnimationFrame(t.id),t&&(t.cancelled=!0)}var e={id:0,cancelled:!1};return n(e,t,i),{cancel:r.bind(null,e),model:t}}t.exports=i},function(t,i,n){"use strict";function r(t,i,n,r){i=i||5e3,n=n||180,r=r||20,this._ground=t,this._gravity=new o(i,1e3),this._spring=new e(1,n,r),this._springing=!1}var e=n(2),o=n(1);r.prototype.set=function(t,i){this._gravity.set(t,i),t>=this._ground?(this._springing=!0,this._spring.snap(t),this._spring.setEnd(this._ground)):this._springing=!1},r.prototype.x=function(){if(this._springing)return this._spring.x();var t=this._gravity.x();return t>=this._ground&&(this._springing=!0,this._spring.snap(this._ground),this._spring.setEnd(this._ground,this._gravity.dx()),t=this._spring.x()),t},r.prototype.dx=function(){return this._springing?this._spring.dx():this._gravity.dx()},r.prototype.done=function(){return this._springing?this._spring.done():this._gravity.done()},r.prototype.configuration=function(){var t=this._gravity.configuration();return t[0].min=1,t[0].max=6e3,t.push.apply(t,this._spring.configuration()),t},t.exports=r},function(t){"use strict";function i(t){this._drag=t,this._dragLog=Math.log(t),this._x=0,this._v=0,this._startTime=0}i.prototype.set=function(t,i){this._x=t,this._v=i,this._startTime=(new Date).getTime()},i.prototype.x=function(t){return void 0==t&&(t=((new Date).getTime()-this._startTime)/1e3),this._x+this._v*Math.pow(this._drag,t)/this._dragLog-this._v/this._dragLog},i.prototype.dx=function(){var t=((new Date).getTime()-this._startTime)/1e3;return this._v*Math.pow(this._drag,t)},i.prototype.done=function(){return Math.abs(this.dx())<1},i.prototype.reconfigure=function(t){var i=this.x(),n=this.dx();this._drag=t,this._dragLog=Math.log(t),this.set(i,n)},i.prototype.configuration=function(){var t=this;return[{label:"Friction",read:function(){return t._drag},write:function(i){t.reconfigure(i)},min:.001,max:.1,step:.001}]},t.exports=i},function(t,i,n){"use strict";function r(t,i){this._gravity=new e(t,0),this._absorb=i||.8,this._reboundedLast=!1}var e=n(1);r.prototype.set=function(t,i){this._gravity.set(t,i)},r.prototype.x=function(){var t=this._gravity.x();if(t>0){if(this._reboundedLast)return 0;this._reboundedLast=!0;var i=this._gravity.dx();return Math.abs(i*this._absorb)>Math.abs(2*this._gravity._a)/60&&this._gravity.set(0,-i*this._absorb),0}return this._reboundedLast=!1,t},r.prototype.dx=function(){return this._gravity.dx()},r.prototype.done=function(){return this._gravity.x()>1},r.prototype.reconfigure=function(t,i){this._gravity.reconfigure(t),this._absorb=i||.8},r.prototype.configuration=function(){var t=this,i=this._gravity.configuration();return i.push({label:"Rebound",read:function(){return t._absorb},write:function(i){t._absorb=i},min:0,max:1.1,step:.1}),i},t.exports=r}])});